parameters:
- name: packageName
  type: string
  default: 'azure-quantum'
- name: envSuffix
  type: string
  default: ''


steps:
- pwsh: ./bootstrap.ps1 -PackageDir ${{ parameters.packageName }} -EnvSuffix '${{ parameters.envSuffix }}' -FromSource $True
  displayName: Create ${{ parameters.packageName }}${{ parameters.envSuffix}} conda environment and install ${{ parameters.packageName }} package from source
- pwsh: build/pack.ps1 -PackageDir ${{ parameters.packageName }}
  displayName: Pack ${{ parameters.packageName }}
  condition: eq(variables.envSuffix, '')
- pwsh: build/test.ps1 -PackageDir ${{ parameters.packageName }} -EnvSuffix '${{ parameters.envSuffix}}'
  displayName: Test ${{ parameters.packageName }}
